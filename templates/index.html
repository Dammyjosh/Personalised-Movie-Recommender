
<!doctype html>
<html>
    <head>
        <title>MovieMagic - Movie Recommender</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'Poppins', sans-serif;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
                min-height: 100vh;
            }
            .main-container {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(5px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                overflow: hidden;
                margin-top: 30px;
                margin-bottom: 30px;
            }
            .header {
                background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
                color: white;
                padding: 25px 0;
                margin-bottom: 30px;
                text-align: center;
                border-bottom: 4px solid rgba(255, 255, 255, 0.1);
            }
            .form-container {
                padding: 0 30px 30px;
            }
            .btn-recommend {
                background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
                border: none;
                padding: 12px 35px;
                font-weight: 600;
                letter-spacing: 1px;
                text-transform: uppercase;
                transition: all 0.3s;
                border-radius: 50px;
                margin-top: 20px;
                font-size: 1.1rem;
            }
            .btn-recommend:hover {
                transform: translateY(-3px);
                box-shadow: 0 5px 15px rgba(106, 17, 203, 0.4);
            }
            .movie-card {
                transition: all 0.3s ease;
                border-radius: 10px;
                overflow: hidden;
                border: none;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                margin-bottom: 25px;
                height: 100%;
            }
            .movie-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            }
            .movie-card img {
                height: 380px;
                object-fit: cover;
                transition: transform 0.5s;
            }
            .movie-card:hover img {
                transform: scale(1.05);
            }
            .card-body {
                background: #f8f9fa;
            }
            .card-title {
                font-weight: 600;
                color: #343a40;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            .recommendations-title {
                color: #343a40;
                font-weight: 600;
                margin: 30px 0 20px;
                position: relative;
                padding-bottom: 10px;
            }
            .recommendations-title:after {
                content: '';
                position: absolute;
                left: 0;
                bottom: 0;
                width: 60px;
                height: 3px;
                background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            }
            select.form-control {
                border-radius: 10px;
                padding: 15px 25px;
                border: 2px solid #e9ecef;
                transition: all 0.3s;
                font-size: 1.1rem;
                height: auto;
                min-height: 60px;
                appearance: none;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right 1.5rem center;
                background-size: 16px 12px;
            }
            select.form-control:focus {
                border-color: #6a11cb;
                box-shadow: 0 0 0 0.2rem rgba(106, 17, 203, 0.25);
            }
            .form-group label {
                font-size: 1.2rem;
                margin-bottom: 12px;
                color: #495057;
                font-weight: 500;
            }
            .movie-select-container {
                margin: 0 auto;
                max-width: 800px;
                position: relative;
            }
            /* Custom dropdown arrow */
            .custom-arrow {
                position: absolute;
                top: 50%;
                right: 25px;
                transform: translateY(-50%);
                pointer-events: none;
                color: #6a11cb;
                font-size: 1.2rem;
            }
        </style>
    </head>
    <body>
        <div class="container main-container">
            <div class="header">
                <h1 class="mb-0">MovieMagic Recommender</h1>
                <p class="mb-0">Discover your next favorite movie</p>
            </div>
            
            <div class="form-container">
                <form action="/recommend" method="POST">
                    <div class="form-group movie-select-container">
                        <label for="movie-select">Select a movie:</label>
                        <select class="form-control" id="movie-select" name="selected_movie" size="1">
                            {% for movie in movie_list %}
                                <option value="{{ movie }}" {% if loop.index > 2 %}hidden{% endif %}>{{ movie }}</option>
                            {% endfor %}
                        </select>
                        <div class="custom-arrow">â–¼</div>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-recommend btn-primary">Get Recommendations</button>
                    </div>
                </form>
            </div>

            {% if recommended_movie_titles %}
            <div class="px-4 pb-4">
                <h3 class="recommendations-title">Recommended For You</h3>
                <div class="row">
                    {% for i in range(recommended_movie_titles|length) %}
                        <div class="col-md-3 col-sm-6">
                            <div class="movie-card">
                                <img src="{{ recommended_movie_posters[i] }}" class="card-img-top" alt="{{ recommended_movie_titles[i] }}">
                                <div class="card-body">
                                    <h5 class="card-title">{{ recommended_movie_titles[i] }}</h5>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- JavaScript -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script>
            // JavaScript to ensure proper dropdown behavior
            document.addEventListener('DOMContentLoaded', function() {
                const select = document.getElementById('movie-select');
                
                // Show all options when dropdown is opened
                select.addEventListener('mousedown', function() {
                    const options = this.options;
                    for (let i = 0; i < options.length; i++) {
                        options[i].hidden = false;
                    }
                });
                
                // Hide extra options after selection
                select.addEventListener('change', function() {
                    const options = this.options;
                    for (let i = 2; i < options.length; i++) {
                        options[i].hidden = true;
                    }
                });
            });
        </script>
    </body>
</html>
